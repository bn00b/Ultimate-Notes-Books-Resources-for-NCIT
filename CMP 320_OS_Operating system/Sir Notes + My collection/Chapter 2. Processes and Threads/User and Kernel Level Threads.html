<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0116)http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh's%20files/User%20and%20Kernel%20Level%20Threads.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="">

<style type="text/css">
/*----------Text Styles----------*/
.ws6 {font-size: 8px;}
.ws7 {font-size: 9.3px;}
.ws8 {font-size: 11px;}
.ws9 {font-size: 12px;}
.ws10 {font-size: 13px;}
.ws11 {font-size: 15px;}
.ws12 {font-size: 16px;}
.ws14 {font-size: 19px;}
.ws16 {font-size: 21px;}
.ws18 {font-size: 24px;}
.ws20 {font-size: 27px;}
.ws22 {font-size: 29px;}
.ws24 {font-size: 32px;}
.ws26 {font-size: 35px;}
.ws28 {font-size: 37px;}
.ws36 {font-size: 48px;}
.ws48 {font-size: 64px;}
.ws72 {font-size: 96px;}
.wpmd {font-size: 13px;font-family: 'Arial';font-style: normal;font-weight: normal;}
/*----------Para Styles----------*/
DIV,UL,OL /* Left */
{
 margin-top: 0px;
 margin-bottom: 0px;
}
</style>

<style type="text/css">
a.style1:link{color:#FFFFFF;text-decoration: none;}
a.style1:visited{color:#FFFFFF;text-decoration: none;}
a.style1:active{color:#FFFFFF;text-decoration: none;}
a.style1:hover{color:#FFFFFF;text-decoration: none;}
</style>
<style type="text/css">
div#container
{
	position:relative;
	width: 842px;
	margin-top: 0px;
	margin-left: auto;
	margin-right: auto;
	text-align:left; 
}
body {text-align:center;margin:0}
</style>
</head>

<body bgcolor="#C0C0C0">

<div id="container">
<div id="image6" style="position:absolute; overflow:hidden; left:452px; top:74px; width:317px; height:165px; z-index:0"><img src="./User and Kernel Level Threads_files/right0.jpg" border="0" width="317" height="165"></div>

<div id="shape1" style="position:absolute; overflow:hidden; left:12px; top:254px; width:758px; height:535px; z-index:1; border:#C0C0C0 1px solid; background-color:#C0C0C0">&nbsp;</div>

<div id="image2" style="position:absolute; overflow:hidden; left:231px; top:278px; width:16px; height:1353px; z-index:2"><img src="./User and Kernel Level Threads_files/line120.gif" border="0" width="16" height="1353"></div>

<div id="image3" style="position:absolute; overflow:hidden; left:14px; top:257px; width:755px; height:17px; z-index:3"><img src="./User and Kernel Level Threads_files/line5.gif" border="0" width="755" height="17"></div>

<div id="image5" style="position:absolute; overflow:hidden; left:12px; top:74px; width:758px; height:165px; z-index:4"><img src="./User and Kernel Level Threads_files/header8.jpg" border="0" width="758" height="165"></div>

<div id="image13" style="position:absolute; overflow:hidden; left:208px; top:319px; width:6px; height:9px; z-index:5"><img src="./User and Kernel Level Threads_files/arrow_red.gif" border="0" width="6" height="9"></div>

<div id="image14" style="position:absolute; overflow:hidden; left:208px; top:423px; width:6px; height:9px; z-index:6"><img src="./User and Kernel Level Threads_files/arrow_red.gif" border="0" width="6" height="9"></div>

<div id="image15" style="position:absolute; overflow:hidden; left:208px; top:398px; width:6px; height:9px; z-index:7"><img src="./User and Kernel Level Threads_files/arrow_red.gif" border="0" width="6" height="9"></div>

<div id="image16" style="position:absolute; overflow:hidden; left:208px; top:371px; width:6px; height:9px; z-index:8"><img src="./User and Kernel Level Threads_files/arrow_red.gif" border="0" width="6" height="9"></div>

<div id="image17" style="position:absolute; overflow:hidden; left:208px; top:345px; width:6px; height:9px; z-index:9"><img src="./User and Kernel Level Threads_files/arrow_red.gif" border="0" width="6" height="9"></div>

<div id="image1" style="position:absolute; overflow:hidden; left:75px; top:1629px; width:755px; height:17px; z-index:10"><img src="./User and Kernel Level Threads_files/line5.gif" border="0" width="755" height="17"></div>

<div id="text1" style="position:absolute; overflow:hidden; left:35px; top:317px; width:171px; height:160px; z-index:11; background-color:#C0C0C0"><div class="wpmd">
<div align="right"><font class="ws8" face="Tahoma"><a href="http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh&#39;s%20files/Index.html" title="Introduction" class="style1">Introduction</a></font><font class="ws8" color="#000000" face="Tahoma">&nbsp;&nbsp;&nbsp;&nbsp; </font></div>
<div align="right"><font class="ws8" color="#000000" face="Tahoma"><br></font></div>
<div align="right"><font class="ws8" face="Tahoma"><a href="http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh&#39;s%20files/Processes%20and%20Threads.html" title="Processes and threads" class="style1">Processes and Threads</a></font><font class="ws8" color="#000000" face="Tahoma">&nbsp;&nbsp;&nbsp; </font></div>
<div align="right"><font class="ws8" color="#000000" face="Tahoma"><br></font></div>
<div align="right"><font class="ws8" face="Tahoma"><a href="http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh&#39;s%20files/Advantages%20and%20disadvantages.html" title="Advantages" class="style1">Advantages and disvantages</a></font><font class="ws8" color="#000000" face="Tahoma">&nbsp;&nbsp;&nbsp;&nbsp; </font></div>
<div align="right"><font class="ws8" color="#000000" face="Tahoma"><br></font></div>
<div align="right"><font class="ws8" face="Tahoma"><a href="http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh&#39;s%20files/User%20and%20Kernel%20Level%20Threads.html" class="style1">User and kernel level threads </a></font><font class="ws8" color="#000000" face="Tahoma"> </font><font class="ws8" color="#000000" face="Tahoma">&nbsp; </font></div>
<div align="right"><font class="ws8" color="#000000" face="Tahoma"><br></font></div>
<div align="right"><font class="ws8" face="Tahoma"><a href="http://www.cs.iit.edu/~cs561/cs450/ChilkuriDineshThreads/dinesh&#39;s%20files/Quiz.html" title="Quiz" class="style1">Quiz</a></font><font class="ws8" color="#000000" face="Tahoma">&nbsp;&nbsp;&nbsp;&nbsp; </font></div>
<div align="right"><font class="ws6" color="#CE0000" face="Spell"><b><br></b></font></div>
<div align="right"><font class="ws6" color="#C0C0C0" face="Spell"><b>________________________________________</b></font></div>
</div></div>

<div id="text2" style="position:absolute; overflow:hidden; left:261px; top:328px; width:506px; height:1292px; z-index:12"><div class="wpmd">
<div align="justify"><font color="#0000FF"><b>&nbsp;&nbsp;&nbsp; Kernel-Level Threads</b></font></div>
<div align="justify"><font color="#0000FF"><b><br></b></font></div>
<div align="justify"> To make concurrency cheaper, the execution aspect of process is separated out into threads. As such, the OS now manages threads and processes. All thread operations are implemented in the kernel and the OS schedules all threads in the system. OS managed threads are called kernel-level threads or light weight processes.</div>
<ul>
<li>NT: Threads</li>
<li>Solaris: Lightweight processes(LWP).</li>
</ul>
<div align="justify"><br></div>
<div align="justify">In this method, the kernel knows about and manages the threads. No runtime system is needed in this case. Instead of thread table in each process, the kernel has a thread table that keeps track of all threads in the system. In addition, the kernel also maintains the traditional process table to keep track of processes. Operating Systems kernel provides system call to create and manage threads.</div>
<div align="justify"><br></div>
<div align="justify"><font color="#0000FF"><b>Advantages:</b></font></div>
<div align="justify"><font color="#0000FF"><b><br></b></font></div>
<ol>
<li value="1">Because kernel has full knowledge of all threads, Scheduler may decide to give more time to a process having large number of threads than process having small number of threads. </li>
<li value="2">Kernel-level threads are especially good for applications that frequently block. </li>
</ol>
<div align="justify"><br></div>
<div align="justify"><font color="#0000FF"><b>Disadvantages</b></font>:</div>
<div align="justify"><br></div>
<ol>
<li value="1">The kernel-level threads are slow and inefficient. For instance, threads operations are hundreds of times slower than that of user-level threads. </li>
<li value="2">Since kernel must manage and schedule threads as well as processes. It require a full thread control block (TCB) for each thread to maintain information about threads. As a result there is significant overhead and increased in kernel complexity. </li>
</ol>
<div align="justify"><font color="#0000FF"><b><br></b></font></div>
<div align="justify"><font color="#0000FF"><b>User-Level Threads</b></font></div>
<div align="justify"><font color="#0000FF"><b><br></b></font></div>
<div align="justify">Kernel-Level threads make concurrency much cheaper than process because, much less state to allocate and initialize. However, for fine-grained concurrency, kernel-level threads still suffer from too much overhead. Thread operations still require system calls. Ideally, we require thread operations to be as fast as a procedure call. Kernel-Level threads have to be general to support the needs of all programmers, languages, runtimes, etc. For such fine grained concurrency we need still "cheaper" threads.</div>
<div align="justify"><br></div>
<div align="justify">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; To make threads cheap and fast, they need to be implemented at user level. User-Level threads are managed entirely by the run-time system (user-level library).The kernel knows nothing about user-level threads and manages them as if they were single-threaded processes.User-Level threads are small and fast, each thread is represented by a PC,register,stack, and small thread control block. Creating a new thread, switiching between threads, and synchronizing threads are done via procedure call. i.e no kernel involvement. User-Level threads are hundred times faster than Kernel-Level threads.</div>
<div align="justify"><br></div>
<div align="justify"><font color="#0000FF"><b>Advantages:</b></font></div>
<div align="justify"><font color="#0000FF"><b><br></b></font></div>
<ol>
<li value="1">The most obvious advantage of this technique is that a user-level threads package can be implemented on an Operating System that does not support threads. </li>
<li value="2">User-level threads does not require modification to operating systems. </li>
<li value="3"><font color="#0000FF">Simple Representation:</font> Each thread is represented simply by a PC, registers, stack and a small control block, all stored in the user process address space. </li>
<li value="4"><font color="#0000FF">Simple Management</font><font color="#0000FF"><b>:</b></font>&nbsp; This simply means that creating a thread, switching between threads and synchronization between threads can all be done without intervention of the kernel. </li>
<li value="5"><font color="#0000FF">Fast and Efficient:</font>&nbsp; Thread switching is not much more expensive than a procedure call. </li>
</ol>
<div align="justify"><br></div>
<div align="justify"><font color="#0000FF"><b>Disadvantages:</b></font></div>
<div align="justify"><font color="#0000FF"><b><br></b></font></div>
<ol>
<li value="1">&nbsp; User-Level threads are not a perfect solution as with everything else, they are a trade off. Since, User-Level threads are invisible to the OS they are not well integrated with the OS. As a result, Os can make poor decisions like scheduling a process with idle threads, blocking a process whose thread initiated an I/O even though the process has other threads that can run and unscheduling a process with a thread holding a lock. Solving this requires communication between between kernel and user-level thread manager.</li>
<li value="2">There is a lack of coordination between threads and operating system kernel. Therefore, process as whole gets one time slice irrespect of whether process has one thread or 1000 threads within. It is up to each thread to relinquish control to other threads. </li>
<li value="3">User-level threads requires non-blocking systems call i.e., a multithreaded kernel. Otherwise, entire process will blocked in the kernel, even if there are runable threads left in the processes. For example, if one thread causes a page fault, the process blocks. </li>
</ol>
<div align="justify"><br></div>
<div align="justify"><br></div>
<div align="justify">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div>
<div align="justify">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div>
<div align="justify">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </div>
</div></div>

<div id="text3" style="position:absolute; overflow:hidden; left:329px; top:292px; width:370px; height:32px; z-index:13"><div class="wpmd">
<div align="center"><font class="ws18" color="#0000FF">User and Kernel Level Threads</font></div>
</div></div>


</div>

</body></html>